(this["webpackJsonpreporting-main"]=this["webpackJsonpreporting-main"]||[]).push([[0],{196:function(e,t,n){},197:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(29),i=n.n(r),c=n(27),o=(n(196),n(197),n(10)),l=n(14),d=n(15),u=n(17),j=n(16),h=n(53),p=n(11),b=n(430),g=n(431),m=n(432),O=n.p+"static/media/logo.123efa46.png",f=n(3),x=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("footer",{className:"footer",children:Object(f.jsx)(b.a,{fluid:!0,className:"bottom-footer",children:Object(f.jsxs)(g.a,{className:"justify-content-center",children:[Object(f.jsx)(m.a,{md:5,children:Object(f.jsxs)("div",{className:"d-flex align-items-center",children:[Object(f.jsx)("img",{src:O,alt:"",height:"150px"}),Object(f.jsx)("h3",{className:"mn-2",children:"Reporting Main Platform"})]})}),Object(f.jsx)(m.a,{md:5,children:Object(f.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime mollitia, molestiae quas vel sint commodi repudiandae consequuntur voluptatum laborum numquam blanditiis harum quisquam eius sed odit fugiat iusto fuga praesentium optio, eaque rerum! Provident similique accusantium nemo autem."})})]})})})})}}]),n}(a.Component),y=n(433),v=n(434),C=n(435),w=n(436),S=n(437),N=n(438),k=n(439),P=n(36),R=n.n(P),E=n(54),_=n(72);n(429),n(200),n(428);_.a.initializeApp({apiKey:"AIzaSyBHFT7c-cL-ota7yTBfCYjCF9gtoMQ5Wew",authDomain:"reporting-main.firebaseapp.com",projectId:"reporting-main",storageBucket:"reporting-main.appspot.com",messagingSenderId:"1051456400117",appId:"1:1051456400117:web:8b96e3744070a63e7573bc",measurementId:"G-WREYHWZ1YQ"}),_.a.firestore();_.a.storage();var A=_.a,F=n(34),M="LOGIN_FAIL",I="LOGIN_SUCCESS",T="REGISTER_FAIL",L="REGISTER_SUCCESS",D="LOGOUT_SUCCESS",G="ACTION_REQUEST",U="ACTION_REQUEST_END",q="LOGIN_REQUEST",z="LOGIN_REQUEST_END",W="FETCH_REPORT",H="FETCH_USER",Y="FETCH_MY_REPORT",Q=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).toggle=function(){a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.logout;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(y.a,{color:"light",light:!0,expand:"md",children:[Object(f.jsx)(v.a,{href:"/",children:"Reporting Panel"}),Object(f.jsx)(C.a,{onClick:this.toggle}),Object(f.jsx)(w.a,{isOpen:this.state.isOpen,navbar:!0,children:Object(f.jsxs)(S.a,{className:"ml-auto",navbar:!0,children:[Object(f.jsx)(N.a,{children:Object(f.jsx)(k.a,{href:"/main/dashboard",children:"Dashboard"})}),Object(f.jsx)(N.a,{children:Object(f.jsx)(k.a,{href:"/auth/login",onClick:e,children:"Logout"})})]})})]})})}}]),n}(a.Component);var V=Object(c.b)(null,(function(e){return{logout:function(){return e((console.log("logit"),function(e){A.auth().signOut().then((function(t){e({type:D,uid:"",user:"",error:""})})).catch((function(t){e({type:"LOGOUT_FAIL",uid:"",error:t})}))}))}}}))(Q),B=n(40),K=n(94),J=n.n(K),Z=n(440),X=n(441),$=n(442),ee=n(443),te=n(444),ne=n(456),ae=n(445),se=n(446),re=n(447),ie=n(448),ce=n(449),oe=n(450),le=n(451),de=n(95),ue=n(32),je=n(65),he=n.n(je),pe=n(187);n.n(pe).a.setApiKey("AIzaSyCwVH3GTF_ZcPxr_diMo_AyVAW3A7GHbKQ");var be=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).toggle=function(){a.setState({modal:!a.state.modal})},a.viewToggle=function(){a.setState({viewModal:!a.state.viewModal})},a.editToggle=function(){a.setState({editModal:!a.state.editModal})},a.handlefieldChange=function(e){a.setState(Object(B.a)({},e.target.name,e.target.value))},a.handleFile=function(e){a.setState(Object(B.a)({},e.target.name,e.target.files[0]))},a.moveMarker=function(e){a.setState({mapPosition:{lat:e.latLng.lat(),lng:e.latLng.lng()},markerPosition:{lat:e.latLng.lat(),lng:e.latLng.lng()}})},a.editMoveMark=function(e){a.setState({mapPosition:{lat:e.latLng.lat(),lng:e.latLng.lng()},markerPosition:{lat:e.latLng.lat(),lng:e.latLng.lng()}})},a.handleChange=function(e){a.setState({address:e})},a.handleSelect=function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(je.geocodeByAddress)(t).then((function(e){return Object(je.getLatLng)(e[0])})).then((function(e){return a.setState({mapPosition:{lat:e.lat,lng:e.lng},markerPosition:{lat:e.lat,lng:e.lng},selectedAddress:t})})).catch((function(e){return console.error("Error",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onInfoWindowClose=function(e){},a.handleSubmit=function(e){e.preventDefault();var t={myFile:a.state.myFile,title:a.state.title,description:a.state.description,coordinates:a.state.mapPosition,created_by:a.props.uid};null!=t&&a.props.addReport(t),a.setState({title:"",description:"",myFile:""}),a.toggle()},a.handleUpdate=function(e){e.preventDefault();var t={myFile:a.state.myFile,myFileName:a.state.myFileName,title:a.state.title,description:a.state.description,coordinates:a.state.mapPosition,created_by:a.props.uid,id:a.state.reportId};a.props.updateReport(t),a.editToggle()},a.state={modal:!1,title:"",editReport:"",description:"",myFile:"",myFileName:"",reportId:"",viewModal:!1,editModal:!1,geoPoint:"",address:"",defaultMapPosition:"",mapPosition:{lat:31.4117257,lng:35.0818155},defaultMarkerPosition:"",markerPosition:{lat:0,lng:0}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchMyReports(this.props.uid),navigator.geolocation.getCurrentPosition((function(t){e.setState({mapPosition:{lat:t.coords.latitude,lng:t.coords.longitude},markerPosition:{lat:t.coords.latitude,lng:t.coords.longitude}})}))}},{key:"render",value:function(){var e=this,t=this.props.myReports;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{className:"mt-5 mb-5",children:Object(f.jsxs)(Z.a,{className:"table-card",children:[Object(f.jsx)(X.a,{className:"bg-white",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("h4",{children:"My Events"}),Object(f.jsx)($.a,{className:"ml-auto",color:"info",onClick:this.toggle,children:"Add Event"})]})}),Object(f.jsx)(ee.a,{children:Object(f.jsxs)(te.a,{responsive:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Files"}),Object(f.jsx)("th",{children:"Title"}),Object(f.jsx)("th",{children:"Description"}),Object(f.jsx)("th",{children:"Created at"}),Object(f.jsx)("th",{children:"Status"}),Object(f.jsx)("th",{children:"Actions"})]})}),Object(f.jsx)("tbody",{children:t&&t.map((function(t,n){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.files.map((function(e){return"audio"==e.type?Object(f.jsx)("audio",{controls:!0,src:e.url,children:" "}):Object(f.jsx)("img",{src:e.url,height:"100px",width:"100px"})}))}),Object(f.jsx)("th",{children:t.title}),Object(f.jsx)("td",{children:t.description}),Object(f.jsx)("td",{children:J.a.unix(t.createdAt.seconds).format("MM-DD-YYYY hh:mm:ss")}),Object(f.jsx)("td",{children:t.status}),Object(f.jsxs)("td",{children:[Object(f.jsx)($.a,{color:"primary",onClick:function(n){e.setState({geoPoint:t.coordinates}),e.viewToggle()},children:Object(f.jsx)("i",{className:"fa fa-map-marker-alt"})})," ",Object(f.jsx)($.a,{color:"info",onClick:function(){e.setState({title:t.title,description:t.description,reportId:t.id,mapPosition:{lat:t.coordinates._lat,lng:t.coordinates._long},markerPosition:{lat:t.coordinates._lat,lng:t.coordinates._long},myFileName:t.files[0].name}),e.editToggle()},children:Object(f.jsx)("i",{className:"fas fa-pencil"})})," ",Object(f.jsx)($.a,{color:"danger",onClick:function(){e.props.deleteReport(t.id)},children:Object(f.jsx)("i",{className:"fas fa-trash"})})," "]})]},n)}))})]})})]})}),Object(f.jsxs)(ne.a,{isOpen:this.state.viewModal,toggle:this.state.viewToggle,centered:!0,size:"lg",children:[Object(f.jsx)(ae.a,{toggle:this.viewToggle,children:"Location"}),Object(f.jsx)(se.a,{style:{height:500,width:"100%"},children:Object(f.jsx)(g.a,{children:Object(f.jsx)(ue.Map,{google:this.props.google,zoom:8,style:{width:"100%",height:"100%"},initialCenter:{lat:31.4117257,lng:35.0818155},children:void 0!=this.state.geoPoint?Object(f.jsx)(ue.Marker,{position:{lat:this.state.geoPoint._lat,lng:this.state.geoPoint._long}}):null})})}),Object(f.jsx)(re.a,{className:"mt-2",children:Object(f.jsx)($.a,{color:"danger",onClick:this.viewToggle,children:"Cancel"})})]}),Object(f.jsxs)(ne.a,{isOpen:this.state.editModal,toggle:this.editToggle,centered:!0,children:[Object(f.jsx)(ae.a,{toggle:this.editToggle,children:"Update Event"}),Object(f.jsxs)(ie.a,{onSubmit:this.handleUpdate,children:[Object(f.jsxs)(se.a,{children:[Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(oe.a,{children:"Title"}),Object(f.jsx)(le.a,{type:"text",name:"title",required:!0,onChange:this.handlefieldChange,defaultValue:this.state.title})]}),Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(oe.a,{children:"Description"}),Object(f.jsx)(le.a,{type:"textarea",name:"description",required:!0,onChange:this.handlefieldChange,defaultValue:this.state.description})]}),Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(oe.a,{children:"Files (Audio/Image)"}),Object(f.jsx)(le.a,{type:"file",name:"myFile",onChange:this.handleFile})]}),Object(f.jsxs)("div",{className:"form-group text-left",style:{height:"400px"},children:[Object(f.jsx)(he.a,{className:"autocomplete-signup",searchOptions:{componentRestrictions:{country:["il"]}},required:!0,value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,children:function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,s=e.loading;return Object(f.jsxs)("div",{children:[Object(f.jsx)(le.a,Object(o.a)({},t({placeholder:"Search Places ...",className:"location-search-input"}))),Object(f.jsxs)("div",{className:"autocomplete-dropdown-container",children:[s&&Object(f.jsx)("div",{children:"Loading..."}),n.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(f.jsx)("div",Object(o.a)(Object(o.a)({},a(e,{className:t,style:n})),{},{children:Object(f.jsx)("span",{children:e.description})}))}))]})]})}}),Object(f.jsx)(g.a,{className:"mx-1",children:Object(f.jsxs)(ue.Map,{google:this.props.google,zoom:9,style:{height:"97%",width:"100%"},containerStyle:{height:"50%",width:"93%"},initialCenter:{lat:this.state.mapPosition.lat,lng:this.state.mapPosition.lng},center:{lat:this.state.mapPosition.lat,lng:this.state.mapPosition.lng},children:[this.state.selectedAddress&&Object(f.jsx)(de.InfoWindow,{onClose:this.onInfoWindowClose,position:{lat:this.state.markerPosition.lat+.0118,lng:this.state.markerPosition.lng},children:Object(f.jsx)("div",{children:Object(f.jsx)("span",{style:{padding:0,margin:0},children:this.state.selectedAddress})})}),Object(f.jsx)(ue.Marker,{draggable:!0,onDragend:function(t,n,a){return e.editMoveMark(a)},position:{lat:this.state.markerPosition.lat,lng:this.state.markerPosition.lng}}),Object(f.jsx)(de.Marker,{})]})})]})]}),Object(f.jsxs)(re.a,{children:[Object(f.jsx)($.a,{color:"success",type:"submit",children:"Update"})," ",Object(f.jsx)($.a,{color:"danger",onClick:this.editToggle,children:"Cancel"})]})]})]}),Object(f.jsxs)(ne.a,{isOpen:this.state.modal,toggle:this.toggle,children:[Object(f.jsx)(ae.a,{toggle:this.toggle,children:"Add an Event"}),Object(f.jsxs)(ie.a,{onSubmit:this.handleSubmit,children:[Object(f.jsxs)(se.a,{children:[Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(oe.a,{children:"Title"}),Object(f.jsx)(le.a,{type:"text",name:"title",required:!0,onChange:this.handlefieldChange})]}),Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(oe.a,{children:"Description"}),Object(f.jsx)(le.a,{type:"textarea",name:"description",required:!0,onChange:this.handlefieldChange})]}),Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(oe.a,{children:"File (Audio/Image)"}),Object(f.jsx)(g.a,{children:Object(f.jsx)(m.a,{xs:6,children:Object(f.jsx)(le.a,{type:"file",name:"myFile",required:!0,onChange:this.handleFile})})})]}),Object(f.jsxs)("div",{className:"form-group text-left",style:{height:"400px"},children:[Object(f.jsx)(he.a,{className:"autocomplete-signup",searchOptions:{componentRestrictions:{country:["il"]}},required:!0,value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,children:function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,s=e.loading;return Object(f.jsxs)("div",{children:[Object(f.jsx)(le.a,Object(o.a)({},t({placeholder:"Search Places ...",className:"location-search-input"}))),Object(f.jsxs)("div",{className:"autocomplete-dropdown-container",children:[s&&Object(f.jsx)("div",{children:"Loading..."}),n.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(f.jsx)("div",Object(o.a)(Object(o.a)({},a(e,{className:t,style:n})),{},{children:Object(f.jsx)("span",{children:e.description})}))}))]})]})}}),Object(f.jsx)(g.a,{className:"mx-1",children:Object(f.jsxs)(ue.Map,{google:this.props.google,zoom:9,style:{height:"97%",width:"100%"},containerStyle:{height:"50%",width:"93%"},initialCenter:{lat:this.state.mapPosition.lat,lng:this.state.mapPosition.lng},center:{lat:this.state.mapPosition.lat,lng:this.state.mapPosition.lng},children:[this.state.selectedAddress&&Object(f.jsx)(de.InfoWindow,{onClose:this.onInfoWindowClose,position:{lat:this.state.markerPosition.lat+.0118,lng:this.state.markerPosition.lng},children:Object(f.jsx)("div",{children:Object(f.jsx)("span",{style:{padding:0,margin:0},children:this.state.selectedAddress})})}),Object(f.jsx)(ue.Marker,{draggable:!0,onDragend:function(t,n,a){return e.moveMarker(a)},position:{lat:this.state.markerPosition.lat,lng:this.state.markerPosition.lng}})]})})]})]}),Object(f.jsxs)(re.a,{children:[Object(f.jsx)($.a,{color:"success",type:"submit",children:"Save"})," ",Object(f.jsx)($.a,{color:"danger",onClick:this.toggle,children:"Cancel"})]})]})]})]})}}]),n}(a.Component);var ge=Object(c.b)((function(e){return{myReports:e.report.myReports,uid:e.auth.uid}}),(function(e){return{fetchMyReports:function(t){return e(function(e){return function(t){A.firestore().collection("reports").where("created_by","==",e).onSnapshot((function(e){var n=[];e.docs.forEach((function(e){n.push(Object(o.a)({id:e.id,createdAt:e.data().createdAt.toDate()},e.data()))})),t({type:Y,myReports:n})}))}}(t))},deleteReport:function(t){return e(function(e){return function(t){A.firestore().collection("reports").doc(e).delete().then((function(){F.b.success("Report Deleted Successfully")})).catch((function(e){alert(e.message)}))}}(t))},addReport:function(t){return e(function(e){return function(){var t=Object(E.a)(R.a.mark((function t(n){var a,s,r,i,c,o,l,d,u,j;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new A.firestore.GeoPoint(e.coordinates.lat,e.coordinates.lng),s=A.firestore().collection("reports").doc(),r=e.myFile.name,i=e.myFile.type,c=i.split("/")[0],o=r.slice(r.lastIndexOf(".")),l=s.id+o.toLowerCase(),t.next=9,A.storage().ref("event_files/"+s.id+o.toLowerCase()).put(e.myFile);case 9:return d=t.sent,t.next=12,d.ref.getDownloadURL();case 12:u=t.sent,null!=a&&(j={title:e.title,description:e.description,createdAt:A.firestore.Timestamp.now(),created_by:e.created_by,status:"pending",files:[{type:c,url:u,name:l}],coordinates:a},A.firestore().collection("reports").add(j).then((function(){F.b.success("Report Added Successfully")})).catch((function(e){F.b.warning(e)})));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},updateReport:function(t){return e(function(e){return function(){var t=Object(E.a)(R.a.mark((function t(n){var a,s,r,i,c,o,l,d,u,j;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==e.myFile){t.next=5;break}return t.next=3,A.storage().ref().child("event_files/".concat(e.myFileName));case 3:t.sent.delete().then((function(){console.log("deleted succcessfully")})).catch((function(e){console.log("error")}));case 5:if(a=new A.firestore.GeoPoint(e.coordinates.lat,e.coordinates.lng),s=A.firestore().collection("reports").doc(),!e.myFile){t.next=19;break}return i=e.myFile.name,c=e.myFile.type,o=c.split("/")[0],l=i.slice(i.lastIndexOf(".")),d=s.id+l.toLowerCase(),t.next=15,A.storage().ref("event_files/"+s.id+l.toLowerCase()).put(e.myFile);case 15:return u=t.sent,t.next=18,u.ref.getDownloadURL();case 18:r=t.sent;case 19:null!=a&&(j=r?{title:e.title,description:e.description,created_by:e.created_by,status:"pending",files:[{type:o,url:r,name:d}],coordinates:a}:{title:e.title,description:e.description,created_by:e.created_by,status:"pending",coordinates:a},A.firestore().collection("reports").doc(e.id).update(j).then((function(){F.b.success("Report Updated Successfully")})).catch((function(e){F.b.warning(e)})));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Object(ue.GoogleApiWrapper)({apiKey:"AIzaSyCwVH3GTF_ZcPxr_diMo_AyVAW3A7GHbKQ"})(be)),me=n(452),Oe=n(453),fe=n(454),xe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).toggle=function(){a.setState({modal:!a.state.modal})},a.getUserEmail=function(e){return void 0!=e&&a.props.users.length>0?a.props.users.find((function(t){return t.id==e})).email:"N/A"},a.state={modal:!1,report:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchReports(),this.props.fetchUsers()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reports;t.users;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(ue.Map,{google:this.props.google,zoom:10,style:{width:"100%",height:"100%"},containerStyle:{width:"98%",height:"90%"},initialCenter:{lat:31.4117257,lng:35.0818155},children:n&&n.map((function(t,n){return Object(f.jsx)(ue.Marker,{position:{lat:t.coordinates.latitude,lng:t.coordinates.longitude},onClick:function(){e.setState({report:t}),e.toggle()}},n)}))}),Object(f.jsxs)(ne.a,{isOpen:this.state.modal,toggle:this.toggle,children:[Object(f.jsx)(ae.a,{toggle:this.toggle,children:"Report"}),Object(f.jsx)(se.a,{children:Object(f.jsx)(Z.a,{className:"report_card",children:Object(f.jsxs)(ee.a,{children:[Object(f.jsx)(me.a,{tag:"h5",children:this.state.report.title}),Object(f.jsx)(Oe.a,{children:this.state.report.description}),Object(f.jsx)(fe.a,{color:"success",children:this.state.report.status}),Object(f.jsxs)(Oe.a,{className:"mt-1",children:["Reported By ",Object(f.jsx)("b",{children:this.getUserEmail(this.state.report.created_by)})]}),null!=this.state.report.createdAt?Object(f.jsxs)(Oe.a,{className:"mt-1",children:["Created at ",Object(f.jsx)("b",{children:J.a.unix(this.state.report.createdAt.seconds).format("DD-MM-YYYY hh:mm:ss")})]}):""]})})})]})]})}}]),n}(a.Component);var ye=Object(c.b)((function(e){return{reports:e.report.report,users:e.user.users}}),(function(e){return{fetchReports:function(){return e((function(e){A.firestore().collection("reports").onSnapshot((function(t){var n=[];t.docs.forEach((function(e){n.push(Object(o.a)({id:e.id,createdAt:e.data().createdAt.toDate()},e.data()))})),e({type:W,reports:n})}))}))},fetchUsers:function(){return e((function(e){A.firestore().collection("users").onSnapshot((function(t){var n=[];t.docs.forEach((function(e){n.push(Object(o.a)({id:e.id},e.data()))})),e({type:H,users:n})}))}))}}}))(Object(ue.GoogleApiWrapper)({apiKey:"AIzaSyCwVH3GTF_ZcPxr_diMo_AyVAW3A7GHbKQ"})(xe)),ve=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.uid?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.a,{fluid:!0,style:{minHeight:"80vh",marginBottom:"5rem"},children:Object(f.jsx)(ye,{})})}):Object(f.jsx)(p.a,{to:"/auth/login"})}}]),n}(a.Component);var Ce=Object(c.b)((function(e){return{uid:e.auth.uid}}),null)(ve),we=n(455),Se=n.p+"static/media/login_side_img.28794e63.png",Ne=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(B.a)({},e.target.name,e.target.value))},a.handleLogin=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.login(t),a.setState({email:"",password:""})},a.state={email:"",password:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.registerComplete()}},{key:"render",value:function(){var e=this.props,t=e.uid,n=e.loading;return t?Object(f.jsx)(p.a,{to:"/main/index"}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.a,{fluid:!0,className:"auth-container",children:Object(f.jsxs)(g.a,{className:"justify-content-center",children:[Object(f.jsx)(m.a,{md:6,className:"p-0",children:Object(f.jsx)("div",{className:"text-center login",children:Object(f.jsxs)("div",{className:"auth-card",children:[Object(f.jsx)("img",{src:O,alt:"logo",className:"mb-2 mt-5",style:{height:"100px",width:"80px"}}),Object(f.jsx)("h2",{className:"mb-5 mt-5",style:{color:"#5E862A"},children:"Reporting Platform"}),Object(f.jsx)(g.a,{className:"justify-content-center",children:Object(f.jsx)(m.a,{md:6,children:Object(f.jsxs)(ie.a,{onSubmit:this.handleLogin,children:[Object(f.jsx)(g.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(le.a,{className:"input",required:!0,type:"email",name:"email",onChange:this.handleChange}),Object(f.jsx)(oe.a,{className:"left",children:"Email"})]})})}),Object(f.jsx)(g.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(le.a,{className:"input",required:!0,type:"password",name:"password",onChange:this.handleChange}),Object(f.jsx)(oe.a,{className:"left",children:"Password"})]})})}),Object(f.jsx)($.a,{className:"mt-5 px-5",type:"submit",style:{background:"#01D472",padding:10,borderRadius:20,fontSize:30,border:"none"},children:n?Object(f.jsx)(we.a,{size:"md"}):"Login"})]})})})]})})}),Object(f.jsxs)(m.a,{md:6,className:"p-0 text-center",children:[Object(f.jsxs)("div",{className:"d-flex justify-content-center mt-3",children:[Object(f.jsx)("h6",{className:"mt-2 mx-2",children:Object(f.jsx)("b",{className:"text-white",children:"Don't have an account?"})}),Object(f.jsx)(h.b,{to:"/auth/register",children:Object(f.jsx)($.a,{style:{background:"#01D472",padding:10,borderRadius:10,border:"none"},children:"Create Your Account"})})]}),Object(f.jsx)("img",{src:Se,alt:"logo_side",className:"mt-3",height:"600px"})]})]})})})}}]),n}(a.Component);var ke=Object(c.b)((function(e){return{uid:e.auth.uid,loading:e.auth.loading}}),(function(e){return{login:function(t){return e(function(e){return function(t){t({type:q}),A.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){A.firestore().collection("users").doc(e.user.uid).onSnapshot((function(n){console.log("daar",e.user.id),t({type:I,user:Object(o.a)({id:n.id},n.data()),error:""}),t({type:z})}))})).catch((function(e){t({type:M,uid:"",error:e}),t({type:z}),alert(e),F.b.warning(e)}))}}(t))},registerComplete:function(){return e((function(e){e({type:"REGISTER_COMPLETE"})}))}}}))(Ne),Pe=n.p+"static/media/check.8a72427d.png",Re=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(B.a)({},e.target.name,e.target.value))},a.handleRegister=function(e){e.preventDefault();var t={email:e.target.email.value,password:e.target.password.value};a.props.register(t),a.setState({email:"",password:""})},a.redirect=function(){a.props.history.push("/auth/login")},a.state={email:"",password:""},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.loading;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.a,{fluid:!0,className:"auth-container",children:Object(f.jsxs)(g.a,{className:"justify-content-center",children:[Object(f.jsxs)(m.a,{md:6,className:"p-0 text-center",children:[Object(f.jsx)("img",{src:O,alt:"logo",className:"mb-2 mt-5",style:{height:"100px",width:"80px"}}),Object(f.jsx)("h4",{className:"text-white mt-5",style:{fontSize:"36px"},children:Object(f.jsx)("b",{children:"Get Started with Report"})}),Object(f.jsx)("h4",{className:"text-white mt-5",style:{fontSize:"36px",fontWeight:200},children:"Get Things Done Quickly"}),Object(f.jsx)("img",{src:Pe,alt:"check",height:"200px",className:"mt-5"})]}),Object(f.jsx)(m.a,{md:6,className:"p-0",children:Object(f.jsx)("div",{className:"text-center register",children:Object(f.jsxs)("div",{className:"auth-card",children:[Object(f.jsx)("h2",{className:"mb-5 mt-5",children:"Create Account"}),Object(f.jsx)(g.a,{className:"justify-content-center",children:Object(f.jsx)(m.a,{md:6,className:"mt-5",children:Object(f.jsxs)(ie.a,{onSubmit:this.handleRegister,children:[Object(f.jsx)(g.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(le.a,{className:"input",required:!0,type:"email",name:"email",onChange:this.handleChange}),Object(f.jsx)(oe.a,{className:"left",children:"Email"})]})})}),Object(f.jsx)(g.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(le.a,{className:"input",required:!0,type:"password",name:"password",onChange:this.handleChange}),Object(f.jsx)(oe.a,{className:"left",children:"Password"})]})})}),Object(f.jsx)($.a,{className:"mt-5",style:{background:"#01D472",padding:10,borderRadius:20,width:"80%",fontSize:30,border:"none"},children:e?Object(f.jsx)(we.a,{size:"md"}):"Create Account"}),this.props.registered?this.redirect():null,Object(f.jsx)(h.b,{to:"/auth/login",children:Object(f.jsx)("h6",{className:"mt-4",style:{cursor:"pointer",color:"black"},children:Object(f.jsx)("b",{children:Object(f.jsx)("u",{children:"Alreay Have an Account? Login"})})})})]})})})]})})})]})})})}}]),n}(a.Component);var Ee=[{path:"/login",component:ke,layout:"/auth"},{path:"/register",component:Object(c.b)((function(e){return{loading:e.auth.requested,registered:e.auth.registered}}),(function(e){return{register:function(t){return e(function(e){return function(){var t=Object(E.a)(R.a.mark((function t(n){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:G}),A.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){A.firestore().collection("users").doc(t.user.uid).set({email:e.email}).then((function(e){n({type:L}),n({type:U}),F.b.success("Account Created Successfully")})).catch((function(e){n({type:T}),n({type:U}),F.b.warning(e)}))})).catch((function(e){n({type:T}),n({type:U}),alert(e),F.b.warning(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Re),layout:"/auth"},{path:"/index",component:Ce,layout:"/main"},{path:"/dashboard",component:ge,layout:"/main"}],_e=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getRoutes=function(e){return e.map((function(e,t){return"/main"===e.layout?Object(f.jsx)(p.b,{path:e.layout+e.path,component:e.component},t):null}))},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(V,{}),Object(f.jsx)("div",{children:Object(f.jsxs)(p.d,{children:[this.getRoutes(Ee),Object(f.jsx)(p.a,{from:"*",to:"/main/index"})]})}),Object(f.jsx)(x,{})]})}}]),n}(a.Component),Ae=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getRoutes=function(e){return e.map((function(e,t){return"/auth"===e.layout?Object(f.jsx)(p.b,{path:e.layout+e.path,component:e.component},t):null}))},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(p.d,{children:[this.getRoutes(Ee),Object(f.jsx)(p.a,{from:"*",to:"/auth/login"})]})})}}]),n}(a.Component),Fe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.uid;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(h.a,{children:e?Object(f.jsxs)(p.d,{children:[Object(f.jsx)(p.b,{path:"/main",render:function(e){return Object(f.jsx)(_e,Object(o.a)({},e))}}),Object(f.jsx)(p.a,{from:"/",to:"/main"})]}):Object(f.jsxs)(p.d,{children:[Object(f.jsx)(p.b,{path:"/auth",render:function(e){return Object(f.jsx)(Ae,Object(o.a)({},e))}}),Object(f.jsx)(p.a,{from:"/",to:"/auth/login"})]})})})}}]),n}(a.Component);var Me=Object(c.b)((function(e){return{uid:e.auth.uid}}),null)(Fe),Ie=(n(426),n(55)),Te=n(188),Le={authError:"",uid:"",requested:!1,registered:!1,user:null,loading:!1},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(o.a)(Object(o.a)({},e),{},{uid:t.user.id,user:Object(o.a)({},t.user),authError:""});case M:return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{uid:"",authError:t.error.message});case L:return Object(o.a)(Object(o.a)({},e),{},{authError:"",registered:!0});case T:return Object(o.a)({},e);case"REGISTER_COMPLETE":return Object(o.a)(Object(o.a)({},e),{},{registered:!1});case D:return Object(o.a)(Object(o.a)({},e),{},{authError:"",uid:"",registered:!1,user:null});case G:return Object(o.a)(Object(o.a)({},e),{},{requested:!0});case U:return Object(o.a)(Object(o.a)({},e),{},{requested:!1});case q:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case z:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});default:return Object(o.a)({},e)}},Ge={report:[],myReports:[]},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(o.a)(Object(o.a)({},e),{},{report:t.reports});case Y:return Object(o.a)(Object(o.a)({},e),{},{myReports:t.myReports});default:return Object(o.a)({},e)}},qe={users:[]},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});default:return Object(o.a)({},e)}},We=Object(Ie.b)({auth:De,report:Ue,user:ze}),He=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ie.c,Ye=Object(Ie.d)(We,function(){var e=localStorage.getItem("auth");if(null!==e)return{auth:JSON.parse(e)}}(),He(Object(Ie.a)(Te.a)));Ye.subscribe((function(){return function(e){var t=JSON.stringify(e.auth);localStorage.setItem("auth",t)}(Ye.getState())}));var Qe=Ye;i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsxs)(c.a,{store:Qe,children:[Object(f.jsx)(Me,{}),Object(f.jsx)(F.a,{})]})}),document.getElementById("root"))}},[[427,1,2]]]);
//# sourceMappingURL=main.64b1ce39.chunk.js.map